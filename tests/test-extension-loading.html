<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯­å½±ç¿»è¯‘æ‰©å±•åŠ è½½æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .test-text {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 16px;
            line-height: 1.6;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .instructions {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #4CAF50;
        }
        .instructions h3 {
            margin-top: 0;
            color: #4CAF50;
        }
        .instructions ol {
            padding-left: 20px;
        }
        .instructions li {
            margin: 8px 0;
            line-height: 1.5;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
        .success {
            background: rgba(76, 175, 80, 0.3);
            border: 1px solid #4CAF50;
            color: #4CAF50;
        }
        .error {
            background: rgba(244, 67, 54, 0.3);
            border: 1px solid #f44336;
            color: #f44336;
        }
        .warning {
            background: rgba(255, 193, 7, 0.3);
            border: 1px solid #FFC107;
            color: #FFC107;
        }
        button {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        .test-results {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ è¯­å½±ç¿»è¯‘æ‰©å±•åŠ è½½æµ‹è¯•</h1>
        
        <div class="instructions">
            <h3>ğŸ“‹ æµ‹è¯•æ­¥éª¤</h3>
            <ol>
                <li>ç¡®ä¿å·²ç»æ„å»ºäº†æ‰©å±•ç¨‹åº (è¿è¡Œ <code>npm run build</code>)</li>
                <li>æ‰“å¼€Chromeæµè§ˆå™¨ï¼Œè¿›å…¥æ‰©å±•ç¨‹åºç®¡ç†é¡µé¢ (<code>chrome://extensions/</code>)</li>
                <li>å¼€å¯"å¼€å‘è€…æ¨¡å¼"</li>
                <li>ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"</li>
                <li>é€‰æ‹©é¡¹ç›®çš„ <code>dist</code> æ–‡ä»¶å¤¹</li>
                <li>æ£€æŸ¥æ‰©å±•æ˜¯å¦æˆåŠŸåŠ è½½ï¼Œæ²¡æœ‰é”™è¯¯ä¿¡æ¯</li>
                <li>åœ¨æ­¤é¡µé¢æµ‹è¯•ç¿»è¯‘åŠŸèƒ½</li>
            </ol>
        </div>

        <div class="test-section">
            <h3>ğŸ”§ æ‰©å±•çŠ¶æ€æ£€æµ‹</h3>
            <button onclick="checkExtensionStatus()">æ£€æŸ¥æ‰©å±•çŠ¶æ€</button>
            <div id="extensionStatus" class="test-results"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ“ ç¿»è¯‘æµ‹è¯•æ–‡æœ¬</h3>
            <p>é€‰ä¸­ä¸‹é¢çš„æ–‡æœ¬ï¼Œå³é”®é€‰æ‹©"è¯­å½±ç¿»è¯‘"æˆ–ä½¿ç”¨å¿«æ·é”®æµ‹è¯•ç¿»è¯‘åŠŸèƒ½ï¼š</p>
            
            <div class="test-text">
                Hello, world! This is a test sentence for the Yuying Translation Extension. 
                The extension should be able to translate this text into Chinese.
            </div>
            
            <div class="test-text">
                Artificial Intelligence is transforming the way we work and live. 
                Machine learning algorithms can process vast amounts of data to identify patterns and make predictions.
            </div>
            
            <div class="test-text">
                The quick brown fox jumps over the lazy dog. 
                This sentence contains every letter of the English alphabet.
            </div>
        </div>

        <div class="test-section">
            <h3>âš™ï¸ åŠŸèƒ½æµ‹è¯•</h3>
            <button onclick="testTranslationAPI()">æµ‹è¯•ç¿»è¯‘API</button>
            <button onclick="testSettings()">æµ‹è¯•è®¾ç½®åŠŸèƒ½</button>
            <button onclick="testCache()">æµ‹è¯•ç¼“å­˜åŠŸèƒ½</button>
            <div id="testResults" class="test-results"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ“Š æµ‹è¯•ç»“æœ</h3>
            <div id="overallResults" class="test-results">
                ç­‰å¾…æµ‹è¯•ç»“æœ...
            </div>
        </div>
    </div>

    <script>
        let testResults = {
            extensionLoaded: false,
            apiWorking: false,
            settingsWorking: false,
            cacheWorking: false
        };

        function updateOverallResults() {
            const results = document.getElementById('overallResults');
            const total = Object.keys(testResults).length;
            const passed = Object.values(testResults).filter(Boolean).length;
            
            results.innerHTML = `
                <h4>æ€»ä½“æµ‹è¯•ç»“æœ: ${passed}/${total} é€šè¿‡</h4>
                <div class="${passed === total ? 'success' : passed > 0 ? 'warning' : 'error'}">
                    æ‰©å±•åŠ è½½: ${testResults.extensionLoaded ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}<br>
                    APIåŠŸèƒ½: ${testResults.apiWorking ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}<br>
                    è®¾ç½®åŠŸèƒ½: ${testResults.settingsWorking ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}<br>
                    ç¼“å­˜åŠŸèƒ½: ${testResults.cacheWorking ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}
                </div>
            `;
        }

        function checkExtensionStatus() {
            const statusDiv = document.getElementById('extensionStatus');
            
            // æ£€æŸ¥æ˜¯å¦æœ‰Chromeæ‰©å±•API
            if (typeof chrome === 'undefined' || !chrome.runtime) {
                statusDiv.innerHTML = `
                    <div class="error">
                        âŒ Chromeæ‰©å±•APIä¸å¯ç”¨<br>
                        è¯·ç¡®ä¿åœ¨Chromeæµè§ˆå™¨ä¸­æ‰“å¼€æ­¤é¡µé¢ï¼Œå¹¶ä¸”æ‰©å±•å·²æ­£ç¡®åŠ è½½
                    </div>
                `;
                testResults.extensionLoaded = false;
                updateOverallResults();
                return;
            }

            // å°è¯•ä¸æ‰©å±•é€šä¿¡
            chrome.runtime.sendMessage({action: 'getStatus'}, (response) => {
                if (chrome.runtime.lastError) {
                    statusDiv.innerHTML = `
                        <div class="error">
                            âŒ æ‰©å±•é€šä¿¡å¤±è´¥: ${chrome.runtime.lastError.message}<br>
                            è¯·æ£€æŸ¥æ‰©å±•æ˜¯å¦æ­£ç¡®åŠ è½½
                        </div>
                    `;
                    testResults.extensionLoaded = false;
                } else {
                    statusDiv.innerHTML = `
                        <div class="success">
                            âœ… æ‰©å±•åŠ è½½æˆåŠŸ<br>
                            çŠ¶æ€: ${JSON.stringify(response, null, 2)}
                        </div>
                    `;
                    testResults.extensionLoaded = true;
                }
                updateOverallResults();
            });
        }

        function testTranslationAPI() {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.innerHTML = '<div class="warning">ğŸ”„ æ­£åœ¨æµ‹è¯•ç¿»è¯‘API...</div>';
            
            if (typeof chrome === 'undefined' || !chrome.runtime) {
                resultsDiv.innerHTML = '<div class="error">âŒ Chromeæ‰©å±•APIä¸å¯ç”¨</div>';
                testResults.apiWorking = false;
                updateOverallResults();
                return;
            }

            chrome.runtime.sendMessage({
                action: 'translate',
                text: 'Hello, world!',
                options: { targetLang: 'zh-CN' }
            }, (response) => {
                if (chrome.runtime.lastError) {
                    resultsDiv.innerHTML = `
                        <div class="error">
                            âŒ ç¿»è¯‘APIæµ‹è¯•å¤±è´¥: ${chrome.runtime.lastError.message}
                        </div>
                    `;
                    testResults.apiWorking = false;
                } else if (response && response.success) {
                    resultsDiv.innerHTML = `
                        <div class="success">
                            âœ… ç¿»è¯‘APIæµ‹è¯•æˆåŠŸ<br>
                            åŸæ–‡: Hello, world!<br>
                            è¯‘æ–‡: ${response.translatedText || 'æœªè¿”å›ç¿»è¯‘ç»“æœ'}
                        </div>
                    `;
                    testResults.apiWorking = true;
                } else {
                    resultsDiv.innerHTML = `
                        <div class="error">
                            âŒ ç¿»è¯‘APIè¿”å›é”™è¯¯: ${response ? response.error : 'æœªçŸ¥é”™è¯¯'}
                        </div>
                    `;
                    testResults.apiWorking = false;
                }
                updateOverallResults();
            });
        }

        function testSettings() {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.innerHTML = '<div class="warning">ğŸ”„ æ­£åœ¨æµ‹è¯•è®¾ç½®åŠŸèƒ½...</div>';
            
            if (typeof chrome === 'undefined' || !chrome.runtime) {
                resultsDiv.innerHTML = '<div class="error">âŒ Chromeæ‰©å±•APIä¸å¯ç”¨</div>';
                testResults.settingsWorking = false;
                updateOverallResults();
                return;
            }

            chrome.runtime.sendMessage({action: 'getSettings'}, (response) => {
                if (chrome.runtime.lastError) {
                    resultsDiv.innerHTML = `
                        <div class="error">
                            âŒ è®¾ç½®åŠŸèƒ½æµ‹è¯•å¤±è´¥: ${chrome.runtime.lastError.message}
                        </div>
                    `;
                    testResults.settingsWorking = false;
                } else {
                    resultsDiv.innerHTML = `
                        <div class="success">
                            âœ… è®¾ç½®åŠŸèƒ½æµ‹è¯•æˆåŠŸ<br>
                            å½“å‰è®¾ç½®: ${JSON.stringify(response, null, 2)}
                        </div>
                    `;
                    testResults.settingsWorking = true;
                }
                updateOverallResults();
            });
        }

        function testCache() {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.innerHTML = '<div class="warning">ğŸ”„ æ­£åœ¨æµ‹è¯•ç¼“å­˜åŠŸèƒ½...</div>';
            
            if (typeof chrome === 'undefined' || !chrome.runtime) {
                resultsDiv.innerHTML = '<div class="error">âŒ Chromeæ‰©å±•APIä¸å¯ç”¨</div>';
                testResults.cacheWorking = false;
                updateOverallResults();
                return;
            }

            chrome.runtime.sendMessage({action: 'getCacheStats'}, (response) => {
                if (chrome.runtime.lastError) {
                    resultsDiv.innerHTML = `
                        <div class="error">
                            âŒ ç¼“å­˜åŠŸèƒ½æµ‹è¯•å¤±è´¥: ${chrome.runtime.lastError.message}
                        </div>
                    `;
                    testResults.cacheWorking = false;
                } else {
                    resultsDiv.innerHTML = `
                        <div class="success">
                            âœ… ç¼“å­˜åŠŸèƒ½æµ‹è¯•æˆåŠŸ<br>
                            ç¼“å­˜ç»Ÿè®¡: ${JSON.stringify(response, null, 2)}
                        </div>
                    `;
                    testResults.cacheWorking = true;
                }
                updateOverallResults();
            });
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥æ‰©å±•çŠ¶æ€
        window.addEventListener('load', () => {
            setTimeout(checkExtensionStatus, 1000);
            updateOverallResults();
        });
    </script>
</body>
</html>