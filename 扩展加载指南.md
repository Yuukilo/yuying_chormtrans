# 语影翻译扩展加载指南

## 🔧 问题修复说明

**问题**: 扩展加载时出现"无法为脚本加载 JavaScript 'js/content.js'"错误

**原因**: webpack配置中的`clean: true`选项导致多个编译配置互相覆盖输出文件

**解决方案**: 
1. 修改webpack配置，只在第一个配置中启用clean选项
2. 确保content.js和popup.js正确编译到dist目录

## 📦 安装步骤

### 1. 编译扩展
```bash
npm run dev
```

### 2. 在Chrome中加载扩展
1. 打开Chrome浏览器
2. 访问 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目的 `dist` 文件夹
6. 确认扩展已成功加载

### 3. 验证安装
- 打开 `test-extension-fixed.html` 进行功能测试
- 检查扩展图标是否出现在Chrome工具栏
- 尝试选择网页文本测试翻译功能

## 🧪 测试文件

- `test-extension-fixed.html` - 修复后的完整测试页面
- `test-extension-simple.html` - 简化测试页面
- `test-extension-loading.html` - 加载状态检测页面

## ✅ 修复验证

编译成功后，`dist/js/` 目录应包含以下文件：
- ✅ `background.js` - 后台脚本
- ✅ `content.js` - 内容脚本（修复后新增）
- ✅ `popup.js` - 弹窗脚本（修复后新增）
- ✅ `api-adapters.js` - API适配器
- ✅ `cache-manager.js` - 缓存管理器
- ✅ `prompt-manager.js` - 提示管理器
- ✅ `translation-service.js` - 翻译服务

## 🔑 API配置

DeepSeek API密钥已预配置：`sk-9adc3a701ba64a4d9df52408da8bb052`

如需修改API设置：
1. 点击扩展图标打开设置面板
2. 在API设置中修改相关配置
3. 保存设置后即可使用

## 🚀 使用方法

1. **选择翻译**: 在任意网页选择文本，会自动显示翻译浮动框
2. **快捷键**: `Alt+T` 切换翻译功能，`Alt+S` 打开设置
3. **右键菜单**: 右键选择文本可使用翻译功能
4. **设置面板**: 点击扩展图标可打开详细设置

## 🔍 故障排除

如果扩展仍无法加载：
1. 检查Chrome控制台是否有错误信息
2. 确认dist目录中包含所有必需文件
3. 尝试重新编译：`npm run dev`
4. 在Chrome扩展页面点击"重新加载"扩展
5. 使用测试页面验证各项功能

## 📞 技术支持

如遇到其他问题，请检查：
- Node.js版本是否兼容
- 依赖包是否正确安装
- webpack编译是否有错误信息
- Chrome浏览器版本是否支持Manifest V3